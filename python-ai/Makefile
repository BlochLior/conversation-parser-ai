# Makefile - needs some work.

# ğŸ Run the FastAPI app using uvicorn (local dev)
run:
	uvicorn app.main:app --host 0.0.0.0 --port 8001 --reload

# ğŸ§ª Run tests using unittest
test:
	PYTHONPATH=python-ai python3 -m unittest discover -s tests -p "test_*.py"

# ğŸ“¦ Build the Docker image
build:
	docker build -t python-ai-service .

# ğŸš€ Run the Docker container
run-docker:
	docker run -p 8001:8001 --env-file=.env -e ENV=production python-ai-service

# ğŸ§½ Clean __pycache__ and coverage
clean:
	rm -rf __pycache__/ python-ai/__pycache__/ tests/__pycache__/ .coverage htmlcov

# ğŸ§¼ Remove all containers and images (careful!)
prune:
	docker system prune -af
